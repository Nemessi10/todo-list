## REST API для Компонента "Користувачі" (на основі таблиці `users`)

**Базовий URL:** `/api/v1`

### Ресурс: Користувачі (`/users`)

Цей компонент відповідає за управління базовими даними користувачів, які зберігаються у таблиці `users`.

#### 1. Реєстрація нового користувача

* **`POST /users/register`**:
    * **Призначення**: Створення нового запису користувача в таблиці `users`.
    * **Запит**:
        * **Метод**: `POST`
        * **URL**: `/api/v1/users/register`
        * **Тіло (JSON)**:
            * `username` (рядок, обов'язково): Унікальне ім'я користувача.
            * `email` (рядок, обов'язково): Унікальний email користувача.
            * `password` (рядок, обов'язково): Пароль користувача (буде хешований на стороні сервера).
            ```json
            {
              "username": "john_doe",
              "email": "john.doe@example.com",
              "password": "strong_password_123"
            }
            ```
        * **Успішна відповідь (201 Created)**: Об'єкт, що представляє нового користувача (без пароля/хешу), та, можливо, токени автентифікації, якщо система одразу логінить.
            ```json
            {
              "user_id": 123,
              "username": "john_doe",
              "email": "john.doe@example.com"
              // "accessToken": "...", // Якщо логіниться одразу
              // "refreshToken": "..." // Якщо логіниться одразу
            }
            ```
        * **Можливі помилки**:
            * `400 Bad Request`: Некоректні або відсутні дані.
            * `409 Conflict`: Користувач з таким `username` або `email` вже існує.
            * `500 Internal Server Error`: Загальна помилка сервера.

#### 2. Вхід користувача (Автентифікація)

* **`POST /users/login`**:
    * **Призначення**: Перевірка облікових даних користувача та видача токенів доступу.
    * **Запит**:
        * **Метод**: `POST`
        * **URL**: `/api/v1/users/login`
        * **Тіло (JSON)**:
            * `email` (рядок, обов'язково): Email користувача.
            * `password` (рядок, обов'язково): Пароль користувача.
            ```json
            {
              "email": "john.doe@example.com",
              "password": "strong_password_123"
            }
            ```
        * **Успішна відповідь (200 OK)**: Токен доступу (JWT), токен оновлення та базова інформація про користувача (нечутлива).
            ```json
            {
              "accessToken": "your_jwt_access_token_here",
              "refreshToken": "your_jwt_refresh_token_here",
              "user": {
                "user_id": 123,
                "username": "john_doe",
                "email": "john.doe@example.com"
              }
            }
            ```
        * **Можливі помилки**:
            * `400 Bad Request`: Некоректні або відсутні дані.
            * `401 Unauthorized`: Неправильний email або пароль.
            * `500 Internal Server Error`: Загальна помилка сервера.

#### 3. Отримання інформації про поточного користувача

* **`GET /users/me`**:
    * **Призначення**: Отримання інформації профілю поточного автентифікованого користувача.
    * **Запит**:
        * **Метод**: `GET`
        * **URL**: `/api/v1/users/me`
        * **Заголовки**: `Authorization: Bearer <accessToken>` (обов'язково)
        * **Успішна відповідь (200 OK)**: Об'єкт, що представляє поточного користувача (без пароля/хешу).
            ```json
            {
              "user_id": 123,
              "username": "john_doe",
              "email": "john.doe@example.com"
            }
            ```
        * **Можливі помилки**:
            * `401 Unauthorized`: Відсутній або недійсний токен авторизації.
            * `404 Not Found`: Користувача не знайдено (хоча для `me` це менш імовірно, якщо токен дійсний).
            * `500 Internal Server Error`: Загальна помилка сервера.

#### 4. Оновлення інформації профілю користувача

* **`PUT /users/me`**:
    * **Призначення**: Оновлення `username` та/або `email` поточного автентифікованого користувача.
    * **Запит**:
        * **Метод**: `PUT`
        * **URL**: `/api/v1/users/me`
        * **Заголовки**: `Authorization: Bearer <accessToken>` (обов'язково), `Content-Type: application/json`
        * **Тіло (JSON)**:
            * `username` (рядок, опціонально): Нове ім'я користувача.
            * `email` (рядок, опціонально): Новий email користувача.
            ```json
            {
              "username": "new_john_doe",
              "email": "new.john.doe@example.com"
            }
            ```
        * **Успішна відповідь (200 OK)**: Оновлений об'єкт користувача.
            ```json
            {
              "user_id": 123,
              "username": "new_john_doe",
              "email": "new.john.doe@example.com"
            }
            ```
        * **Можливі помилки**:
            * `400 Bad Request`: Некоректні дані.
            * `401 Unauthorized`: Відсутній або недійсний токен авторизації.
            * `409 Conflict`: Новий `username` або `email` вже зайнятий іншим користувачем.
            * `500 Internal Server Error`: Загальна помилка сервера.

#### 5. Зміна пароля користувача

* **`PUT /users/me/password`**:
    * **Призначення**: Зміна пароля поточного автентифікованого користувача.
    * **Запит**:
        * **Метод**: `PUT`
        * **URL**: `/api/v1/users/me/password`
        * **Заголовки**: `Authorization: Bearer <accessToken>` (обов'язково), `Content-Type: application/json`
        * **Тіло (JSON)**:
            * `currentPassword` (рядок, обов'язково): Поточний пароль користувача (для підтвердження).
            * `newPassword` (рядок, обов'язково): Новий пароль користувача.
            ```json
            {
              "currentPassword": "strong_password_123",
              "newPassword": "even_stronger_password_456"
            }
            ```
        * **Успішна відповідь (204 No Content)**: Пароль успішно змінено (відсутнє тіло відповіді).
        * **Можливі помилки**:
            * `400 Bad Request`: Некоректні дані (наприклад, новий пароль не відповідає вимогам, або він такий самий як поточний).
            * `401 Unauthorized`: Неправильний поточний пароль або недійсний токен авторизації.
            * `500 Internal Server Error`: Загальна помилка сервера.

#### 6. Видалення облікового запису користувача

* **`DELETE /users/me`**:
    * **Призначення**: Видалення облікового запису поточного автентифікованого користувача.
    * **Запит**:
        * **Метод**: `DELETE`
        * **URL**: `/api/v1/users/me`
        * **Заголовки**: `Authorization: Bearer <accessToken>` (обов'язково)
        * **Успішна відповідь (204 No Content)**: Обліковий запис успішно видалено.
        * **Можливі помилки**:
            * `401 Unauthorized`: Відсутній або недійсний токен авторизації.
            * `500 Internal Server Error`: Загальна помилка сервера.
